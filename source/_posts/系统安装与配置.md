---
title: 系统安装与配置
date: 2021-01-05 11:33:47
categories:
  - 操作系统
tags:
description: 本文记录了Windows以及Ubuntu平台下操作系统及常用工具的安装，并对常用的命令进行了归纳总结。
---

## 常用工具

**Network**

浏览器必须Chrome，
路由软件推荐V2Ray。

**Study**

笔记分四类整理：

偏理论专业知识使用[LATEX](https://www.latex-project.org/get/)整理，方便输入公式；专业领域代码片段使用[Github](https://github.com/)整理。论文、电子书及网页使用Zerote整理。代码使用[Github](https://github.com/)整理。本地编辑`MarkDown`文档采用[Typora](https://typora.io/)。富媒体使用PowerPoint管理，并同步于Onedrive。


机械性记忆知识点推荐[Anki](https://apps.ankiweb.net/)，
灵感以及碎片化知识管理推荐[Trello](https://trello.com/)。

PDF文档阅读推荐[知之阅读](http://www.zhizhireader.com/)。

归档文件的备份使用移动硬盘,
[百度网盘](https://pan.baidu.com/disk/home?#/all?path=%2F&vmode=list)，
[Google Drive](https://www.google.com/drive/)。
其中百度网盘用于存放大体积、不常用且丢失后损失不大的文件，该部分文件无二次备份，
Google Drive用于保存重要的私人文件，
移动硬盘用于二次备份重要的私人文件，以及大体积的常用文件，
大体积常用文件亦无二次备份。


**Coding**

Ubuntu下C++程序开发推荐[Clion](https://www.jetbrains.com/clion/download/#section=windows)，
Ubuntu和Windows下Python程序开发推荐[PyCharm](https://www.jetbrains.com/pycharm-edu/download/#section=windows)，
Windows远程调试服务器代码推荐[VSCode Insider](https://code.visualstudio.com/insiders/)，
代码版本管理推荐使用[Github](https://github.com/)。



**Tools**

文本文件编辑推荐[Notepad++](https://notepad-plus-plus.org/download/v7.7.1.html)，
压缩文件软件推荐[7z](https://www.7-zip.org/)，
Windows录屏软件推荐Bandicam，
Ubuntu录屏软推荐GifCam，
Windows截屏软件推荐FSCapture，
Windows磁盘文件搜索推荐[Everything](https://www.voidtools.com/downloads/),
Windows资源管理器插件推荐[Listary](https://www.listary.com/），
快到飞起，
Windows磁盘占用查看推荐SpaceSniffer，
Windows快捷键设置推荐WinHotK，
Windows品台Flash播放需安装[Adobe AIR](https://get.adobe.com/cn/air/otherversions/)，
启动盘制作推荐Rufus或UltraISO。
FTP客户端使用[FileZilla](https://filezilla-project.org/)。
IEEE 754单精度二进制表示在线计算器见[链接](https://www.binaryconvert.com/convert_float.html)。
IEEE 754双精度二进制表示在线计算器见[链接](https://www.binaryconvert.com/convert_double.html)。
UTC时间戳转换在线计算器见[链接](https://tool.chinaz.com/tools/unixtime.aspx)。
经纬度CSV转kml在线计算器见[链接](http://www.convertcsv.com/csv-to-kml.htm),使用时仅需在CSV中保留`Latitude`和`Longitude`和` Altitude`三列即可，上传文件后无需进行其它操作。
Windows下磁盘数据恢复软件推荐EaseUS。
Matrix Calcus在线计算器见[链接](http://www.matrixcalculus.org/)。

## Windows常用命令

### 1. System and Files

**强制重新加载环境变量**
```bash
set PATH=C:
echo %PATH%
```

**用U盘制作启动盘后空间变小的恢复方法**

在命令行窗口执行如下命令:

```bash
diskpart
```

在弹出窗口运行如下命令:

```bash
list disk
select disk 1
clean
```

打开磁盘管理器为U盘重新建立分区。

### 2. Programs

```bash
explorer.exe ::{645FF040-5081-101B-9F08-00AA002F954E} // Recycle Bin
```

## Ubuntu常用命令

### 1. System and Files

**Check System Version**

```bash
lsb_release -a
```

**ssh without passwd**

On your client computer generate public key:
```bash
ssh-keygen
```

Copy the client public key to the server:
```bash
scp ~/.ssh/id_rsa.pub user@222.22.2.2.:~
```

Check whether `authorized_keys` exists in the directory `~/.ssh/` on the server. If not, create it:
```bash
touch authorized_keys
chmod 600 authorized_keys
```

Append the client public key to the server's authorized_keys:
```bash
cat ~/id_rsa.pub >> ~/.ssh/authorized_keys
```

**Change Shell Version**

```bash
# List the all installed shells
cat /etc/shells

# Check which Terminal you are using
ls -l /proc/$$/exe
echo $SHELL

# Change default shell for the current user
chsh -s /path/to/shell
```

However, if you are using ssh to connect to a remote server, the abovementioned prompt may be invalid. Using the following prompt instead.

```bash
exec /bin/dash
exec /bin/zsh
```

**Mount and unmount disk remotely**

```bash
fdisk -l # list all available disks
mount -t ntfs /dev/sdb2 /media/sukie/Data # mount
df -lh # check disk usage
umount /dev/sdb2 # unmount
```

**Check disk usage & spare space**

```bash
df -h # list all partions' usage condition
du -hs /path/to/directory # list the disk usage of each FILE recursively
```

**Calculate amounts of FILES**
```bash
# Reference: https://blog.csdn.net/xh_hit/article/details/80651565
ls -l|grep "^-"| wc -l
ls -lR|grep "^-"| wc -l
ls -l|grep "^d"| wc -l
```

Recursively coping files with specified extension**

```bash
cp --parents -R folder_src/**/*.mp4 ./folder_dst
```

**nohup**

```bash
nohup ./scripts/train.sh > log.txt 2>&1 &
```

**Batch rename files**

```bash
ls *jpg | awk -F\. '{print "mv "$0" C"NR".jpg"}' | sh
```



**Empty Trash in Command Line**

```bash
rm -rf ~/.local/share/Trash/*
```

**Calculate md5**

```bash
certutil -hashfile filename MD5 # windows
md5sum filename # ubuntu
```

**Summarize disk usage of each FILE recursively**

```bash
du -hs /path/to/directory # ubuntu
```

`grep` display multiple lines infomation

 ```bash
 grep -C 5 foo file 显示file文件里匹配foo字串那行以及上下5行
grep -B 5 foo file 显示foo及前5行
grep -A 5 foo file 显示foo及后5行
 ```
修改用户文件夹路径

```
vim ~/.config/user-dirs.dirs
```

### 2. SSH

**Install SSH server**

```bash
sudo apt-get install openssh-server
```

**Start SSH server**

```bash
sudo /etc/init.d/ssh start
```

**Set password for user**

```bash
sudo passwd user-name
```

**Enable SSH password authentication**

```bash
sudo vim /etc/ssh/sshd_config
# set PasswordAuthentication as yes
```

**Restart SSH service**

```bash
sudo service sshd restart
```


**Install SSH client**

```bash
sudo apt-get install openssh-client
```

### 3. VNC

**Install VNC server**

```bash
sudo apt-get install x11vnc
```
**Set VNC password**

```bash
x11vnc -storepasswd
```

**Start VNC service**

```bash
x11vnc -usepw
```

### 4. TensorboardX

```bash
tensorboard --host 0.0.0.0 --logdir runs --port 6006 # tensorflow and tensorboardX are required
```
Then open the link `http://162.105.92.77:6006` in your local browser.

The following command may be useful
```bash
lsof -i: 6006 # list process that occupying port 6006
kill PID # use the actual value instead of PID
```

tensorboard: ` Permission denied: '/tmp/.tensorboard-info/pid-2274.info' `

```bash
# 申明环境变量
export TMPDIR=/tmp/$USER; 
# 创建目录
mkdir -p $TMPDIR;
# 打开tensorboard
tensorboard --logdir $LOGDIR
```

### 5. CUDA

**Check cuda version**

```bash
/usr/local/cuda/bin/nvcc --version
```

**Activate and deactivate enviroment**

```bash
source activate tensorflow
source deactive tensorflow
```

**Install commonly used packages**

```bash
conda install ipython
conda install jupyter
conda install opencv
```

### 6. Virtualenv

**Install virtualenv and create new venv**

```bash
sudo apt install pip // install pip

pip3 install virtualenv // install virtualenv via pip3

virtualenv -p /usr/bin/python3 --no-site-packages venv // create new virtual enviroments named venv

source venv/bin/activate // activate virtual enviroment
```

**List all installed packaegs**

```bash
pip3 list
```

**Build into Virtualenv**

```bash
export $VIRTUAL_ENV=[your_path_to_env]
cmake -D MAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=$VIRTUAL_ENV/local/ -D PYTHON_EXECUTABLE=$VIRTUAL_ENV/bin/python -D PYTHON_PACKAGES_PATH=$VIRTUAL_ENV/lib/python2.7/site-packages -D INSTALL_PYTHON_EXAMPLES=ON ..
make -j
make install
```

**Deactivate virtalenv**

```bash
deactivate venv
```

### 7. Media

**Converting batches images into video**

```bash
ffmpeg -framerate 25 -i C%06d.jpg -c:v libx264 -profile:v high -crf 20 -pix_fmt yuv420p output.mp4
```

### 8. Jupyter Notebook

**Install**

```bash
# Create a virtual environment to install ipython and jupyter notebbook
pip3 install ipython[all] # Install packages in the virutal environment
```

**Set remote access**

Generate the template configuration file.

```bash
jupyter notebook --generate-config
```

Open your python environment in the terminal, and then input the following commands.

```python
from IPython.lib import passwd
passwd()
```

Copy the output`sha1` value, and edit the configuration file `~/.jupyter/jupyter_notebook_config.py` as the following.

```bash
c.NotebookApp.ip='*'
c.NotebookApp.password = u'sha:ce...'
c.NotebookApp.open_browser = False
c.NotebookApp.port =8888 #可自行指定一个端口, 访问时使用该端口
```

Run the jupyter notebook in thte background

```bash
nohup jupyter notebook > /dev/null 2>&1 &
```

Now you can access the jupyter notebook in your server at the url `http://162.122.11.23:8888`.

### Nvidia

```bash
nvidia-smi
```